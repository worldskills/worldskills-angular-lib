"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ResourceUpload = void 0;
class ResourceUpload {
    constructor(obj) {
        this.tags = []; // do not create tags
        this.name = obj && obj.name || { lang_code: 'en', text: null };
        this.ws_entity = obj && obj.ws_entity;
        this.types = obj && obj.types || [];
        this.version = obj && obj.version || { name: '1.0', };
        this.metadata = obj && obj.metadata || [];
    }
    static fromResource(resource) {
        const version = resource.versions[resource.versions.length - 1];
        const translation = version.translations[version.translations.length - 1];
        return new ResourceUpload({
            name: resource.name,
            ws_entity: resource.ws_entity.id,
            tags: resource.tags,
            types: resource.resource_types.map(x => x.id),
            metadata: resource.metadata.map(x => {
                return { metadata: x.metadata.id, value: x.value };
            }),
            version: {
                name: version.name,
                date: version.date,
                tags: version.tags,
                translation: {
                    version: version.id,
                    lang_code: translation.lang_code,
                    storage_data: translation.storage_data,
                    storage_type: translation.storage_type.id
                }
            }
        });
    }
}
exports.ResourceUpload = ResourceUpload;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb3VyY2VjLXVwbG9hZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3dvcmxkc2tpbGxzLWFuZ3VsYXItbGliL3NyYy9saWIvcmVzb3VyY2VzL21vZGVscy9yZXNvdXJjZWMtdXBsb2FkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUtBLE1BQWEsY0FBYztJQVN6QixZQUFZLEdBQTZCO1FBQ3ZDLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMscUJBQXFCO1FBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLElBQUksRUFBQyxJQUFJLEVBQUUsS0FBSyxHQUFHLENBQUM7UUFDckQsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLFFBQVEsSUFBSSxFQUFFLENBQUM7SUFDNUMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxZQUFZLENBQUMsUUFBa0I7UUFDM0MsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNoRSxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFFLE9BQU8sSUFBSSxjQUFjLENBQ3ZCO1lBQ0UsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJO1lBQ25CLFNBQVMsRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUU7WUFDaEMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJO1lBQ25CLEtBQUssRUFBRSxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDN0MsUUFBUSxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNsQyxPQUFPLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDckQsQ0FBQyxDQUFDO1lBQ0YsT0FBTyxFQUFFO2dCQUNQLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtnQkFDbEIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJO2dCQUNsQixJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7Z0JBQ2xCLFdBQVcsRUFBRTtvQkFDWCxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUU7b0JBQ25CLFNBQVMsRUFBRSxXQUFXLENBQUMsU0FBUztvQkFDaEMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxZQUFZO29CQUN0QyxZQUFZLEVBQUUsV0FBVyxDQUFDLFlBQVksQ0FBQyxFQUFFO2lCQUMxQzthQUNGO1NBQ0YsQ0FDRixDQUFDO0lBQ0osQ0FBQztDQUNGO0FBNUNELHdDQTRDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEkxOG5UZXh0IH0gZnJvbSAnLi4vLi4vY29tbW9uL21vZGVscy9pMThuLXRleHQnO1xuaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCB7IFZlcnNpb25DcmVhdGUgfSBmcm9tICcuL3ZlcnNpb24tY3JlYXRlJztcbmltcG9ydCB7IFJlc291cmNlTWV0YWRhdGFVcGRhdGUgfSBmcm9tICcuL3Jlc291cmNlLW1ldGFkYXRhLXVwZGF0ZSc7XG5cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZVVwbG9hZCB7XG4gIG5hbWU6IEkxOG5UZXh0O1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZVxuICB3c19lbnRpdHk6IG51bWJlcjtcbiAgdHlwZXM6IG51bWJlcltdO1xuICB2ZXJzaW9uOiBWZXJzaW9uQ3JlYXRlO1xuICBtZXRhZGF0YTogUmVzb3VyY2VNZXRhZGF0YVVwZGF0ZVtdO1xuICB0YWdzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihvYmo/OiBQYXJ0aWFsPFJlc291cmNlVXBsb2FkPikge1xuICAgIHRoaXMudGFncyA9IFtdOyAvLyBkbyBub3QgY3JlYXRlIHRhZ3NcbiAgICB0aGlzLm5hbWUgPSBvYmogJiYgb2JqLm5hbWUgfHwgeyBsYW5nX2NvZGU6ICdlbicsIHRleHQ6IG51bGwgfTtcbiAgICB0aGlzLndzX2VudGl0eSA9IG9iaiAmJiBvYmoud3NfZW50aXR5O1xuICAgIHRoaXMudHlwZXMgPSBvYmogJiYgb2JqLnR5cGVzIHx8IFtdO1xuICAgIHRoaXMudmVyc2lvbiA9IG9iaiAmJiBvYmoudmVyc2lvbiB8fCB7bmFtZTogJzEuMCcsIH07XG4gICAgdGhpcy5tZXRhZGF0YSA9IG9iaiAmJiBvYmoubWV0YWRhdGEgfHwgW107XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGZyb21SZXNvdXJjZShyZXNvdXJjZTogUmVzb3VyY2UpOiBSZXNvdXJjZVVwbG9hZCB7XG4gICAgY29uc3QgdmVyc2lvbiA9IHJlc291cmNlLnZlcnNpb25zW3Jlc291cmNlLnZlcnNpb25zLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IHRyYW5zbGF0aW9uID0gdmVyc2lvbi50cmFuc2xhdGlvbnNbdmVyc2lvbi50cmFuc2xhdGlvbnMubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIG5ldyBSZXNvdXJjZVVwbG9hZChcbiAgICAgIHtcbiAgICAgICAgbmFtZTogcmVzb3VyY2UubmFtZSxcbiAgICAgICAgd3NfZW50aXR5OiByZXNvdXJjZS53c19lbnRpdHkuaWQsXG4gICAgICAgIHRhZ3M6IHJlc291cmNlLnRhZ3MsXG4gICAgICAgIHR5cGVzOiByZXNvdXJjZS5yZXNvdXJjZV90eXBlcy5tYXAoeCA9PiB4LmlkKSxcbiAgICAgICAgbWV0YWRhdGE6IHJlc291cmNlLm1ldGFkYXRhLm1hcCh4ID0+IHtcbiAgICAgICAgICByZXR1cm4geyBtZXRhZGF0YTogeC5tZXRhZGF0YS5pZCwgdmFsdWU6IHgudmFsdWUgfTtcbiAgICAgICAgfSksXG4gICAgICAgIHZlcnNpb246IHtcbiAgICAgICAgICBuYW1lOiB2ZXJzaW9uLm5hbWUsXG4gICAgICAgICAgZGF0ZTogdmVyc2lvbi5kYXRlLFxuICAgICAgICAgIHRhZ3M6IHZlcnNpb24udGFncyxcbiAgICAgICAgICB0cmFuc2xhdGlvbjoge1xuICAgICAgICAgICAgdmVyc2lvbjogdmVyc2lvbi5pZCxcbiAgICAgICAgICAgIGxhbmdfY29kZTogdHJhbnNsYXRpb24ubGFuZ19jb2RlLFxuICAgICAgICAgICAgc3RvcmFnZV9kYXRhOiB0cmFuc2xhdGlvbi5zdG9yYWdlX2RhdGEsXG4gICAgICAgICAgICBzdG9yYWdlX3R5cGU6IHRyYW5zbGF0aW9uLnN0b3JhZ2VfdHlwZS5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH1cbn1cbiJdfQ==